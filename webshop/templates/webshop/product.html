{% extends "webshop/layout.html" %}

{% block body %}
{% load static %}

<div class="main">
    {% if outofstock %}
        Geen producten in deze categorie.
    {% else %}
        <div class="container">
            <div class="row">
                <div class="col">
                    <h2 id="title">
                        {{ product.name }}
                        {% if user.is_authenticated %}
                            {% if added %}
                                <a href="{% url 'deletefromfav' product.name %}">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
                                        <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                                    </svg>
                                </a>
                            {% else %}
                                <a href="{% url 'addtofav' product.name %}">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-heart" viewBox="0 0 16 16">
                                        <path d="M8 2.748l-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"/>
                                    </svg>
                                </a>
                            {% endif %}
                        {% endif %}
                    </h2>
                    <hr class="my-4">
                </div>
            </div>
            <div class="row align-items-center" id="roww">
                <div class="col" id="coll" class="emmelien">
                    <img src="{% static product.image.first.image.url %}" id="productpic">
                </div>
                <div class="col" id="coll">
                    {% if message %}
                        <p><strong>{{ message }}</strong></p>
                        {{ product.description }}<br>
                        Materiaal: {{ product.metal_type }}<br>
                        <strong>€{{ product.price }}</strong><br>
                    {% else %}
                        {{ product.description }}<br>
                        Materiaal: {{ product.metal_type }}<br>
                        <strong>€{{ product.price }}</strong><br>
                        <form action="{% url 'addtocart' product.name %}" method="post">
                            {% csrf_token %}
                            <div class="row">
                                <input class="form-control" type="number" id="inputnumber" placeholder="Aantal" name="hoeveelheid" min="1" max="10"><br>
                            </div>
                            <div class="row">
                                <button data-testid="add-to-cart-button-enabled" class="btn" id="buttonadd" type="submit" name="addtocart">
                                    <p></p>
                                    <span class="text">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" style="margin-right: 10px;" height="16" fill="currentColor" class="bi bi-bag-fill" viewBox="0 0 16 16">
                                            <path d="M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5z"/>
                                        </svg> 
                                        In winkelmand
                                    </span>
                                </button>
                            </div>
                        </form>
                    {% endif %}
                </div>
            </div>
        </div>
    {% endif %}
<div>

<script>
    $(document).ready(function(){  

        var checkField;

        //checking the length of the value of message and assigning to a variable(checkField) on load
        checkField = $("input#inputnumber").val().length;  

        var enableDisableButton = function(){         
        if(checkField > 0){
            $('#buttonadd').removeAttr("disabled");
        } 
        else {
            $('#buttonadd').attr("disabled","disabled");
        }
        }        

        //calling enableDisableButton() function on load
        enableDisableButton();            

        $('input#inputnumber').keyup(function(){ 
        //checking the length of the value of message and assigning to the variable(checkField) on keyup
        checkField = $("input#inputnumber").val().length;
        //calling enableDisableButton() function on keyup
        enableDisableButton();
        });
    });
</script>

{% endblock %}